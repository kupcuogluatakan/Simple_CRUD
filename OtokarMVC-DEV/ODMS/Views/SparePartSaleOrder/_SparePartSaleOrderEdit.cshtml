@using ODMSCommon.Resources
@model ODMSModel.SparePartSaleOrder.SparePartSaleOrderViewModel
<style type="text/css">
    #popupContent {
        width: auto !important;
    }
</style>
<body style="height: 500px">
    <link href="~/Style/Content.css" rel="stylesheet" />
    <script src="~/Scripts/odms.objectsearch.js"></script>
    <link href="~/Style/bootstrap.css" rel="stylesheet" />
    <script src="~/Scripts/custom.js"></script>
    @Html.AntiForgeryToken()
    <div class="labelDiv">@Html.LabelFor(v => v.CustomerId)</div>
    <div>
        @Html.Partial("~/Views/ObjectSearch/ObjectSearch.cshtml", new ODMSModel.ObjectSearch.ObjectSearchModel { ObjectSearchType = CommonValues.ObjectSearchType.Customer, WindowTitle = MessageResource.ObjectSearch_WindowTitle_Customer, ReferenceObjectId = "CustomerId", ReferenceObjectValue = Model != null ? Model.CustomerId : 0, ParentWindowId = "modelWindow", Required = true, SelectCallBackFunction = "", ClearCallBackFunction = "" })
    </div>
    <div class="clearDiv">&nbsp;</div>
    <div class="labelDiv">@Html.LabelFor(v => v.SoTypeId)</div>
    <div class="shortTxtDiv">
        @Html.Kendo().ComboBoxFor(v => v.SoTypeId).DataTextField("Text").DataValueField("Value").Events(e => e.Change("GetValues")).BindTo(ViewBag.SoTypeList as List<SelectListItem>).Placeholder(CommonUtility.GetResourceValue("Global_Display_Choose"))
        @Html.ValidationMessageFor(c => c.SoTypeId)
    </div>
    <div class="labelDiv">@Html.LabelFor(v => v.StockTypeId)</div>
    <div class="shortTxtDiv">
        @Html.Kendo().ComboBoxFor(v => v.StockTypeId).Enable(false).DataTextField("Text").DataValueField("Value").BindTo(ViewBag.StockTypeList as List<SelectListItem>).Placeholder(CommonUtility.GetResourceValue("Global_Display_Choose"))
        @Html.ValidationMessageFor(c => c.StockTypeId)
    </div>
    <div class="clearDiv">&nbsp;</div>
    <div class="labelDiv">@Html.LabelFor(v => v.IsProposal)</div>
    <div class="shortTxtDiv">@Html.CheckBoxFor(v => v.IsProposal) @Html.ValidationMessageFor(c => c.IsProposal)</div>
        @Html.HiddenFor(c => c.SoNumber)
    @Html.HiddenFor(c => c.OrderDate)
    <div class="clearDiv">&nbsp;</div>

</body>
<script type="text/javascript">

    function RefreshMasterGrid() {
        if ($('#SoNumber').val() != '') {
            if ('@ViewBag.IsCreate' == 'True') {
                parent.ShowTabs($('#SoNumber').val(), true);
                parent.refreshGridAndselectRow(true);
                $('#SoNumber').val('');
            }
        }
    }
    function GetValues() {
        var token = $('input[name="__RequestVerificationToken"]').val();

        $.post("@Url.Action("GetStockType", "SparePartSaleOrder")", {
            soTypeId: $('#SoTypeId').val(),
            "__RequestVerificationToken": token
        }, function (json) {
            if (json) {
                $("#StockTypeId").data('kendoComboBox').value(json.StockTypeId);
            }
        }, "JSON");
    }
    $(document).ready(function () {
        RefreshMasterGrid();

        $('frmSparePartSaleOrder').each(function () {
            var validator = $(this).data('validator');
            if (validator && validator.settings) {
                validator.settings.ignore = "";
            }
        });
    });
</script>
