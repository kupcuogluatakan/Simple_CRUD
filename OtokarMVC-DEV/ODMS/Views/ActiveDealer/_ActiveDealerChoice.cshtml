
@model ODMSModel.ActiveDealer.ActiveDealerModel
@{
    Layout = null;
}
@Html.AntiForgeryToken()
@if (TempData["IsActiveDealerComboBoxVisible"] != null && (bool)TempData["IsActiveDealerComboBoxVisible"])
{
    @Html.Kendo().ComboBoxFor(v => v.DealerId).Name("ActiveDealerCombo").HtmlAttributes(new { style = "width:275px"}).Events(e => e.Change("SetDealer")).DataTextField("Text").DataValueField("Value").BindTo(ViewBag.DealerList as List<SelectListItem>).Placeholder(CommonUtility.GetResourceValue("Global_Display_Choose"))
}
<script type="text/javascript">
    function SetDealer() {
        var token = $('input[name="__RequestVerificationToken"]').val();
        $.ajax({
            type: "POST",
            url: "@Url.Action("SetDealer","ActiveDealer")",
            data: { dealerId: $('#ActiveDealerCombo').data('kendoComboBox').value(), "__RequestVerificationToken": token },
            traditional: true,
            success: function(result) {
                window.location.reload();
            },
            dataType: "json"
        });
    }
</script>