@using ODMSBusiness.Terminal.Common
@using ODMSBusiness.Terminal.StockMovement.Dtos
@using ODMSCommon.Resources
@using ODMSTerminal.Infrastructure.Utility
@model ODMSBusiness.Terminal.PickingList.Dtos.PickingDetailInfo
@{
    ViewBag.Title = MessageResource.Terminal_PickingList_Title_Index;
    ViewBag.WrapperCssClass = "wrapper-colored white-background";
    ViewBag.BodyCssClass = "primary";
}
@section header
{
    @Html.Partial("_subheader")
}
<div class="margin-3 pageContent">

    @Html.HiddenFor(c => c.LeftQuantity)
    <table border="0" cellspacing="1" width="100%" class="margin-top-3 readonly">
        <tbody>
            <tr>
                <td class="bold stay-line">@MessageResource.Terminal_PickingList_Part</td>
                <td class="bold">:</td>
                <td>@Model.PartCode</td>
                <td class="last-child">&nbsp;</td>
            </tr>
            <tr>
                <td class="bold">@MessageResource.Terminal_PickingList_LeftQuantity</td>
                <td class="bold">:</td>
                <td>@Model.LeftQuantity</td>
                <td class="last-child">&nbsp;</td>
            </tr>
            <tr>
                <td class="bold stay-line">@MessageResource.CycleCountResultReport_Display_WareHouseName</td>
                <td class="bold">:</td>
                <td>
                    @Html.TextBox("WarehouseCode", "", new { @class = "text", onblur = "PickingList.SearchWareHouse()" })
                </td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td class="bold stay-line">@MessageResource.CycleCountResultReport_Display_RackName</td>
                <td class="bold">:</td>
                <td>
                    @Html.TextBox("RackCode", "", new { @class = "text", onblur = "PickingList.SearchRack()" })
                </td>
                <td>&nbsp;</td>
            </tr>
            <tr>

                <td colspan="4" class="text-right"><input id="btnGo" type="button" class="btn btn-xs primary margin-top-3" value="@MessageResource.Global_Display_Go"></td>
            </tr>
            <tr>
                <td colspan="4" class="last-child"><input id="btnSave" disabled="disabled" type="submit" class="btn btn-xs disabled margin-top-3" value="@MessageResource.Global_Display_Save"></td>
            </tr>
        </tbody>
    </table>

    @if (Model.StockRackList != null)
    {
        using (Html.BeginForm("save", "pickinglist", FormMethod.Post,new {id="frmDetails"}))
        {
            var counter = 0;
            @Html.HiddenFor(c=>c.PickingId)
            @Html.HiddenFor(c => c.PartId)
            @Html.HiddenFor(c => c.PickingDetailId)
            @Html.HiddenFor(c => c.LeftQuantity)
            <table id="racklist" border="0" cellspacing="0" style="table-layout: fixed" width="100%" class="margin-top-3 datatable">
                <thead>
                <tr>
                    <th>@MessageResource.FixAssetInventory_Display_Rack</th>
                    <th>@MessageResource.Terminal_PickingList_CurrentQuantity</th>
                    <th class="last-child">@MessageResource.Terminal_StockcardQuery_Quantity</th>
                </tr>
                </thead>
                <tbody>
                @foreach (var item in Model.StockRackList)
                {

                    <tr data-rackcode="@item.RackCode">
                        <td style="width: 30%; word-break: break-all">@item.RackCode</td>
                        <td>@item.Quantity</td>
                        <td class="last-child">@Html.TextBoxFor(c => c.StockRackList[counter].PickQuantity, new {@class = "text",value="", onblur = "PickingList.EnableSaveButton()"})</td>
                    </tr>
                    counter++;
                }
                </tbody>

            </table>
            for (int i = 0; i < Model.StockRackList.Count(); i++)
            {
                @Html.HiddenFor(c => c.StockRackList[i].StockRackDetail)
                @Html.HiddenFor(c => c.StockRackList[i].RackCode)
                @Html.HiddenFor(c => c.StockRackList[i].Quantity)
                @Html.HiddenFor(c => c.StockRackList[i].RackId)
            }
        }
    }
</div>

@section scripts
{
    <script src="~/Scripts/views/pickinglist/index.js"></script>
    <script>
        $(document).ready(function () {
            PickingList.PageInit();
            KS.Common.Focus("#WarehouseCode");
        });
    </script>

}
